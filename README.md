# GenAI Music Lab

Experiment with Generative AI music createion

## Directory Structure

```text
├── .env                        <- Environment variables for the project such secrets.
├── .git                        <- Git version control repository folder.
│   ├── HEAD                    <- Points to the current branch.
│   ├── branches                <- Folder for branch references.
│   ├── config                  <- Local configuration.
│   ├── description             <- Text file for the repository description.
│   ├── hooks                   <- Client-side or server-side scripts to run during git actions.
│   ├── info                    <- Additional info for the repository.
│   ├── objects                 <- All data for the repository (trees, commits, blobs).
│   └── refs                    <- References to commits (branches, tags, remotes).
├── .github                     <- GitHub-specific settings and configurations.
│   ├── CODEOWNERS              <- Specifies individuals or teams that are responsible for code in a repository.
│   ├── ISSUE_TEMPLATE          <- Templates for issues to be used by contributors.
│   │   ├── ask_issues_template.md         <- Issue template for asking questions.
│   │   ├── bug_report_template.md         <- Issue template for reporting bugs.
│   │   ├── data_aquisition_template.md    <- Issue template for data acquisition tasks.
│   │   ├── data_creation_template.md      <- Issue template for data creation tasks.
│   │   ├── experiment_issues_template.md  <- Issue template for experiment tasks.
│   │   ├── explore_issues_template.md     <- Issue template for exploration tasks.
│   │   ├── feature_request.md             <- Issue template for feature requests.
│   │   └── model_issues_templates.md      <- Issue template for model-related tasks.
│   ├── PULL_REQUEST_TEMPLATE   <- Templates for pull requests to be used by contributors.
│   │   └── pull_request_template.md       <- Template for creating new pull requests.
│   └── workflows               <- GitHub Actions workflows for CI/CD.
│       └── black.yaml          <- Workflow for the Black code formatter.
├── .gitignore                  <- Specifies intentionally untracked files to ignore.
├── .pre-commit-config.yaml     <- Configuration for pre-commit hooks to enforce coding style and checks.
├── .ruff_cache                 <- Cache directory for the Ruff tool.
├── .vscode                     <- Configuration for Visual Studio Code editor.
│   ├── cspell.json             <- Configuration for the Code Spell Checker in VS Code.
│   ├── dictionaries            <- Custom dictionaries for the Code Spell Checker.
│   │   └── data-science-en.txt <- Dictionary file for data science terms.
│   ├── extensions.json         <- Specifies extensions recommended for the project in VS Code.
│   └── settings.json           <- Project-specific settings for VS Code.
├── Makefile                    <- Makefile with commands like `make data` or `make train`.
├── README.md                   <- The top-level README for developers using this project.
├── config                      <- Directory for project configuration files.
├── data                        <- Data for the project, divided into different stages of data processing.
│   ├── external                <- Data from third party sources.
│   ├── interim                 <- Intermediate data that has been transformed.
│   ├── processed               <- The final, canonical data sets for modeling.
│   └── raw                     <- The original, immutable data dump.
├── docs                        <- Directory for project documentation.
│   ├── api-reference.md        <- API reference documentation.
│   ├── explanation.md          <- Explanatory documentation on the project.
│   ├── how-to-guides.md        <- Step-by-step guides on tasks.
│   ├── index.md                <- The main page of the documentation.
│   └── tutorials.md            <- Tutorials for the project.
├── mkdocs.yml                  <- Configuration file for the MkDocs documentation tool.
├── models                      <- Directory for trained models.
├── notebooks                   <- Jupyter notebooks for data exploration and experimentation.
├── poetry.lock                 <- Lock file generated by Poetry to lock dependencies to specific versions.
├── pyproject.toml              <- Specifies dependencies for the project in a format that Poetry can understand.
├── src                         <- Source code for the project.
│   └── genaimusiclab          <- Main module for the project.
│       ├── __init__.py         <- Makes genaimusiclab a Python module.
│       ├── app.py              <- Main application script.
│       └── utils.py            <- Utility functions for the project.
└── tests                       <- Directory for test files.
```

## Instructions

### Prerequisites

- Ensure you have installed Python 3.

### Setting Up the Development Environment

1. **Install Recommended VS Code Extensions**:

   To ensure a consistent development environment and take advantage of tools
   and configurations tailored for this project, we recommend installing the
   extensions listed in the `.vscode/extensions.json` file.

   1. Open the project in Visual Studio Code.
   2. Open the Extensions panel by clicking on the square icon on the sidebar or
      pressing `Ctrl+Shift+X`.
   3. In the Extensions search bar, type `@recommended` to filter and display
      the list of recommended extensions for the project.
   4. For each recommended extension, click the `Install` button to add it to
      your VS Code setup.

2. **Install Poetry**

   For this project, we utilize **Poetry** for Python dependency
   management and packaging. We've chosen Poetry over `pip` or `conda`
   for these tasks due to its robustness and ease of use.

   However, for the creation of virtual environments, we rely on `conda`
   as it is preferred by Azure.

   #### Installing and Setting up Poetry on Linux

   To simplify the installation and setup process, we've provided
   `Makefile` targets. Here's how you can use them:

   1. **Install Poetry**:
      ```bash
      make poetry_install
      ```
      This command will install Poetry on your system.

   2. **Set up Poetry PATH**:
      ```bash
      export PATH="/home/azureuser/.local/bin:$$PATH"
      ```
      This ensures that Poetry's bin directory
      (`/home/azureuser/.local/bin`) is included in your `PATH` environment
      variable.

   3. **Verify Poetry Installation**:
      ```bash
      make poetry_verify
      ```
      After setting up, you can verify that Poetry has been installed and
      configured correctly. This command should display the current version
      of Poetry.

3. **Create and Activate a Conda's Python Virtual Environment**:
   ```bash
   make conda_create
   conda activate genai-music-lab-env
   ```
   > We utilize `conda` for creating environments and managing packages,
   > as it is the preferred Python package tool in Azure. Notably, `pip`
   > encounters issues in this context and may not function properly.

4. **Install Dependencies**:
   ```bash
   make poetry_dependencies
   ```
   > We utilize a `requirements.txt` file for package management instead
   > of an `environment.yml` file. This approach ensures smoother
   > package installations and avoids certain build-related issues
   > encountered with Conda's environment creation process.

5. **Setting Up Essential Bash Tools**: Install a curated list of essential Bash
   tools for data science and general tasks:
   ```bash
   make bash_install_ds
   ```
   
   Verify the availability of each tool

   ```bash
   make bash_verify_tools 
   ```

   For the tools reported as missing:

   1. Try running the tool with the `--version` flag, for instance, `pdftotext
   --version`. 
   2. Ubuntu is generally helpful and will suggest the apt package that contains
   the missing tool, if it's available.
   3. Proceed with the suggested `sudo apt install [package-name]` command to
   get the tool installed.

   An example:

   ```
   Command 'pdftotext' not found, but can be installed with:
   sudo apt install poppler-utils
   ```

   Follow the system's advice (`sudo apt install poppler-utils` in this case) to
   install the necessary tool.

6. **Build Documentation**:
   ```bash
   make docs_build
   ```

7. **Start the live-reloading docs server**:
   ```bash
   make docs_serve
   ```

8.  **CSpell Checker: Extracting Terms from Python Libraries**: Enhance
   the CSpell checker's dictionary with terms from the Python libraries:
   ```bash
   make cspell_dictionary
   ```

### Notes

- Remember deactivate it when you're done using `conda deactivate`.
- This guide assumes the use of `make` commands defined in a `Makefile`.
  If you aren't using a Makefile, replace the `make` commands with the
  corresponding Python commands.
- Running the `make` command displays a menu of available options, each
  associated with a specific command for easy project management.